$(document).ready(function(){function startupFunctions(){popstate=!1,FastClick.attach(document.body),isMobile&&$("body").removeClass("noscroll"),$("header").hasClass("eliza")?elizaImage():killWorkers(),$("#page-structure").hasClass("four-oh-four")&&webGLTrue?(isFourOhFour=!0,fourOhFourKeyup()):isFourOhFour=!1,widowControl(),caseStudyLinks(),bindClicks(),windowWidth>640&&stickyNav(),imageFunctions(),formInput(),mobileMenu(),hideHeaderOnScroll()}function bindClicks(){$(".no-ajax").removeClass("dJAX_internal"),$('a[href="#"], a[href*="mailto"], a[href*="tel"], a[target="_blank"]').removeClass("dJAX_internal")}function stickyNav(){var navStick=windowHeight/2,navHeight=$("nav").outerHeight(!0)+100,previousScroll=0,scrollOffset=-10,pos=0;$(window).scroll(function(){pos=$(window).scrollTop(),pos>navStick?$("nav").addClass("sticky"):($("nav").removeClass("revealed"),navHeight>pos&&$("nav").removeClass("sticky animate"));var scrollDiff=pos-previousScroll;$("nav").hasClass("sticky")&&!$("nav").hasClass("revealed")?scrollOffset>=scrollDiff?$("nav").addClass("animate revealed"):$("nav").removeClass("revealed"):$("nav").hasClass("sticky")&&$("nav").hasClass("revealed")&&scrollDiff>0&&$("nav").removeClass("revealed"),previousScroll=pos})}function imageFunctions(){$(".video").fitVids(),$(".cycle-slideshow").cycle(),$(".horiscroll").kinetic({cursor:"ew-resize",x:!0,y:!1,triggerHardware:!0,movingClass:{left:"horiscroll-moving-left",right:"horiscroll-moving-right"}}),$(".horiscroll-right").on("click",function(){return $(".horiscroll").kinetic("start",{velocity:5}),!1}),$(".horiscroll-left").on("click",function(){return $(".horiscroll").kinetic("start",{velocity:-5}),!1}),$gallery=$(".flick-gallery").flickity({cellSelector:".flick-screen",wrapAround:!0,pageDots:!1,accessibility:!1,draggable:!0,resize:!0,cellAlign:"center",prevNextButtons:!1}),$("#flick-gallery-left").on("click",function(){return $gallery.flickity("previous",!0),!1}),$("#flick-gallery-right").on("click",function(){return $gallery.flickity("next",!0),!1}),$(".gallery-zoom").each(function(index){$($(this)).lightGallery({download:!1,hash:!0,galleryId:index+1,controls:!1,mousewheel:!1,fullscreen:!1,getCaptionFromTitleOrAlt:!1,counter:!1,actualSize:!1}),$($(this)).on("onAfterOpen.lg",function(event){$("body").addClass("noscroll-mid")}),$($(this)).on("onBeforeClose.lg",function(event){$("body").removeClass("noscroll-mid")})})}function mobileMenu(){$("#mobile-menu-button").on("click",function(){return $("#site-nav, #mobile-menu-button").toggleClass("mobile-active"),$("body").toggleClass("noscroll"),!1})}function caseStudyLinks(){if($("body").hasClass("desktop")){var images=new Array;$(".case-study-container-link").each(function(index){var studyBackground=$(this).data("background");images[index]=new Image,images[index].src=studyBackground}),$(".case-study-container-link").hover(function(){$("#case-study-container").addClass("hover");var studyBackground=$(this).data("background"),studyTag=$(this).data("tagline"),studyMeta=$(this).data("meta"),studyNumber=$(this).data("number");$("#case-study-container").css("background-image","url("+studyBackground+")"),$("#case-study-container .case-study-tagline ").text(studyTag),$("#case-study-container .case-study-services ").text(studyMeta),$("#case-study-container .case-study-container-number ").text(studyNumber)},function(){$("#case-study-container").removeClass("hover"),$("#case-study-container").css("background-image",""),$("#case-study-container .case-study-tagline ").text(""),$("#case-study-container .case-study-services ").text(""),$("#case-study-container .case-study-container-number ").text("")})}}function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}function elizaImage(){function canvasWorkers(){workerPurpleX.postMessage({cmd:"start",value:-20}),workerPurpleY.postMessage({cmd:"start",value:20}),workerGreenX.postMessage({cmd:"start",value:0}),workerGreenY.postMessage({cmd:"start",value:-30}),scale1==seriously.transform("2d")||scale2==seriously.transform("2d")||(workerPurpleX.addEventListener("message",function(e){purpleTranslate[0]=e.data,scale2.translate(purpleTranslate[0],purpleTranslate[1])},!1),workerPurpleY.addEventListener("message",function(e){purpleTranslate[1]=e.data},!1),workerGreenX.addEventListener("message",function(e){greenTranslate[0]=e.data,scale1.translate(greenTranslate[0],greenTranslate[1])},!1),workerGreenY.addEventListener("message",function(e){greenTranslate[1]=e.data},!1))}if(webGLTrue){img=document.getElementById("image");var seriousImg=new Image;if(seriousImg.src=img.src,container=$("header"),imgRatio=img.width/img.height,$("#canvas").prepend('<canvas id="webgl"></canvas>'),canvas=document.getElementById("webgl"),resizeImage(),seriously=new Seriously,sourceImage=seriously.source(seriousImg),target=seriously.target(canvas),seriousImg.onload=function(){target.width=sourceImage.width,target.height=sourceImage.height,layers=seriously.effect("layers",6),layers.source0=sourceImage,edge=seriously.effect("edge"),blend1=seriously.effect("blend"),edge.source=sourceImage,blend1.bottom=layers.source0,blend1.top=edge,blend1.opacity="0.15",blend1.mode="overlay",layers.source1=blend1,linearGreen=seriously.effect("linear-transfer"),scale1=seriously.transform("2d"),blend2=seriously.effect("blend"),linearGreen.source=sourceImage,linearGreen.intercept=[0,.45,.1,0],scale1.source=linearGreen,scale1.scale(1.4),scale1.translate(0,-30),blend2.bottom=layers.source1,blend2.top=scale1,blend2.opacity="0.7",blend2.mode="normal",layers.source2=blend2,linearPurple=seriously.effect("linear-transfer"),scale2=seriously.transform("2d"),blend3=seriously.effect("blend"),linearPurple.source=sourceImage,linearPurple.intercept=[.5,-.1,.7,0],scale2.source=linearPurple,scale2.scale(1.125),scale2.translate(-20,20),blend3.bottom=layers.source2,blend3.top=scale2,blend3.opacity="0.5",blend3.mode="normal",layers.source3=blend3,blend4=seriously.effect("blend"),blend4.bottom=layers.source3,blend4.top=linearPurple,blend4.opacity="0.5",blend4.mode="hardlight",layers.source4=blend4,blend5=seriously.effect("blend"),blend5.bottom=layers.source4,blend5.top=edge,blend5.opacity="0.1",blend5.mode="overlay",layers.source5=blend5,target.source=layers,seriously.go(),$("body").removeClass("initial-load")},canvasWorkers(),!isMobile&&webGLTrue){var purpleX,purpleY,greenX,greenY;$(canvas).mousemove(function(e){var x=e.clientX,y=e.clientY,halfWidth=img.width/2,halfHeight=img.height/2;purpleX=-15*(x/halfWidth-1)-20,purpleY=15*(y/halfHeight-1)+20,greenX=40*(x/halfWidth-1),greenY=-40*(y/halfHeight-1)-30,workerPurpleX.postMessage({cmd:"stop"}),workerPurpleY.postMessage({cmd:"stop"}),workerGreenX.postMessage({cmd:"stop"}),workerGreenY.postMessage({cmd:"stop"}),$("body").hasClass("initial-load")||(scale1.translate(greenX,greenY),scale2.translate(purpleX,purpleY))}),$(canvas).mouseout(function(e){workerPurpleX.postMessage({cmd:"start",value:purpleX}),workerPurpleY.postMessage({cmd:"start",value:purpleY}),workerGreenX.postMessage({cmd:"start",value:greenX}),workerGreenY.postMessage({cmd:"start",value:greenY})})}else isMobile&&window.DeviceOrientationEvent&&webGLTrue&&(killWorkers(),window.addEventListener("deviceorientation",function(e){var x=e.gamma,y=e.beta;0==window.orientation?(scale1.translate(1.5*x,1.5*y),scale2.translate(.75*x,.75*y)):90==window.orientation?(scale1.translate(1.6*y,-1.6*x),scale2.translate(.8*y,x*-.8)):-90==window.orientation&&(scale1.translate(-1.6*y,1.6*x),scale2.translate(y*-.8,.8*x))}))}else if(!webGLTrue){img=document.getElementById("image"),container=$("header");var imgFallback=$(img).data("fallback");container.css("background-image","url("+imgFallback+")"),$("#canvas").remove()}}function killWorkers(){workerPurpleX.postMessage({cmd:"stop"}),workerPurpleY.postMessage({cmd:"stop"}),workerGreenX.postMessage({cmd:"stop"}),workerGreenY.postMessage({cmd:"stop"})}function widowControl(){windowWidth=$(window).width();var widowElements=$("h1, h2, h3, h4, h5, h6, li, p, figcaption, .case-study-tagline, .large-cta, .client-list").not(".discovery_cell p, .no-widow, #site-nav li, footer h2, footer li, .footer-next-study-link h1, .mcm-table-kpi td");widowElements.each(function(){$(this).html($(this).html().replace(/&nbsp;/g," "))}),windowWidth>640&&widowElements.each(function(){$(this).html($(this).html().replace(/\s((?=(([^\s<>]|<[^>]*>)+))\2)\s*$/,"&nbsp;$1"))})}function resizeImage(){containerRatio=container.width()/container.height(),imgRatio>containerRatio?($(img).css("height","100%").css("width","auto"),$("#canvas").css("height","100%").css("width","auto")):containerRatio>imgRatio&&($(img).css("width","100%").css("height","auto"),$("#canvas").css("width","100%").css("height","auto"))}function captureScreen(){html2canvas($(".ajax"),{letterRendering:!0,allowTaint:!0}).then(function(canvas){screenShotCanvas=canvas,canvasDataURL=screenShotCanvas.toDataURL(),canvasImage=new Image,canvasImage.src=canvasDataURL,screenCaptured=!0})}function initializeGlitch(image,height){function init(){scene=new THREE.Scene,sceneBG=new THREE.Scene,camera=new THREE.OrthographicCamera(-windowHalfX,windowHalfX,windowHalfY,-windowHalfY,1,1e4),camera.position.z=100,background=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(image),depthTest:!1}),background.map.needsUpdate=!0,plane=new THREE.PlaneBufferGeometry(1,1),bgMesh=new THREE.Mesh(plane,background),bgMesh.position.z=1,bgMesh.scale.set(SCREEN_WIDTH,height,1),sceneBG.add(bgMesh),bgMesh.material.map.needsUpdate=!0;new THREE.Scene;renderer=new THREE.WebGLRenderer,renderer.setClearColor(16777215),renderer.setSize(window.innerWidth,window.innerHeight),renderer.setPixelRatio(window.devicePixelRatio),renderer.autoClear=!1,renderer.gammaInput=!0,renderer.gammaOutput=!0,renderBackground=new THREE.RenderPass(sceneBG,camera),$(renderer.domElement).attr("id","loader").css("height",height),$("#main-body").append(renderer.domElement);var rtParameters={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!0},clearMask=new THREE.ClearMaskPass;composer=new THREE.EffectComposer(renderer,new THREE.WebGLRenderTarget(SCREEN_WIDTH,SCREEN_HEIGHT,rtParameters)),renderScene=new THREE.TexturePass(composer.renderTarget2),composer.addPass(renderBackground),composer.addPass(clearMask),composer1=new THREE.EffectComposer(renderer,new THREE.WebGLRenderTarget(SCREEN_WIDTH,SCREEN_HEIGHT,rtParameters));var glitch=new THREE.GlitchPass(glitchDtSize,glitchDelay,glitchAmplification);glitch.renderToScreen=!0,composer1.addPass(renderScene),composer1.addPass(glitch),renderScene.uniforms.tDiffuse.value=composer.renderTarget2,glitchExists=!0}function updateGlitch(){windowHalfY=height/2,camera.top=windowHalfY,camera.bottom=-windowHalfY,camera.updateProjectionMatrix();var canvas=screenShotCanvas;backgroundTexture=new THREE.Texture(canvas),backgroundTexture.minFilter=THREE.LinerFilter,backgroundTexture.magFilter=THREE.LinerFilter,backgroundTexture.needsUpdate=!0,background=new THREE.MeshBasicMaterial({map:backgroundTexture,depthTest:!1}),plane=new THREE.PlaneBufferGeometry(1,1),$(renderer.domElement).attr("id","loader").css("height",height),sceneBG.remove(bgMesh),bgMesh=new THREE.Mesh(plane,background),bgMesh.position.z=1,bgMesh.scale.set(SCREEN_WIDTH,height,1),sceneBG.add(bgMesh)}function render(){renderer.clear(),composer.render(delta),composer1.render(delta)}function animate(){animateable&&setTimeout(function(){render(),requestAnimationFrame(animate)},1e3/fps)}var fps=20;isFourOhFour&&(fps=5);var SCREEN_WIDTH=window.innerWidth,SCREEN_HEIGHT=height;height>4096&&(SCREEN_HEIGHT=4096);var windowHalfX=window.innerWidth/2,windowHalfY=height/2,delta=.1;glitchExists?updateGlitch():init(),animate()}function loadPageCanvas(){""==window.location.hash&&$("html").velocity("scroll",{axis:"y",duration:1e3,mobileHA:!1}),animateable=!0,$("#loader").length&&($("#loader").css({"z-index":999}),glitchExists=!0),initializeGlitch(canvasDataURL,screenShotCanvas.height),$("#loader").velocity({opacity:[1,0]},{duration:1e3})}function removePageCanvas(){var hash;""!=window.location.hash&&(hash=window.location.hash,setTimeout(function(){$(window).scrollTop($(hash).offset().top-50)},500)),$("#loader").velocity({opacity:0},{delay:500,duration:1e3}),setTimeout(function(){animateable=!1,$("#loader").css({"z-index":-1})},1600)}function hideHeaderOnScroll(){var target=$("#webgl"),lastPos=0;$(window).on("scroll",function(){var pos=$(this).scrollTop();pos>lastPos?pos>target.outerHeight()&&(target.css({display:"none"}),killWorkers()):lastPos>pos&&pos<target.outerHeight()+100&&target.css({display:"block"}),lastPos=pos})}function loadFourOhFourCanvas(){animateable=!0,inputReady=!1;var height=$("#page-structure").height();initializeGlitch(canvasDataURL,height),$("#loader").velocity({opacity:[1,0]},{duration:500}),$("#loader").css({"z-index":999}),setTimeout(function(){animateable=!1,inputReady=!0,$("#loader").velocity({opactiy:0},{duration:500}),$("#loader").css({"z-index":-1})},500)}function fourOhFourKeyup(){var input=$(".404-input");input.focus(),$("#main-body").on("click",function(e){input.focus()}),input.on("keyup",function(e){return $(".new-output").text(input.val()),inputReady&13!==e.keyCode?(captureScreen(),void loadFourOhFourCanvas()):!1}),$(".four-oh-four-form").on("submit",function(e){e.preventDefault();var val=$(this).children($(".404-input")).val().toLowerCase();"home"===val?$(".home-link").click():"about"===val?$(".about-link").click():"work"===val?$(".work-link").click():"contact"===val?$(".contact-link").click():"kittens"===val?showKittens():resetForm()})}function resetForm(withKittens){var message="Sorry that command is not recognized.",input=$(".404-input");withKittens&&($(".kittens").removeClass("kittens"),message="Huzzzzzah Kittehs!"),$(".new-output").removeClass("new-output"),input.val(""),$(".terminal").append('<p class="prompt">'+message+'</p><p class="prompt output new-output"></p>'),$(".new-output").velocity("scroll"),{duration:100}}function showKittens(){$(".terminal").append("<div class='kittens'><p class='prompt'>	                             ,----,         ,----,                                          ,---,</p><p class='prompt'>       ,--.                ,/   .`|       ,/   .`|                     ,--.              ,`--.' |</p><p class='prompt'>   ,--/  /|    ,---,     ,`   .'  :     ,`   .'  :     ,---,.        ,--.'|   .--.--.    |   :  :</p><p class='prompt'>,---,': / ' ,`--.' |   ;    ;     /   ;    ;     /   ,'  .' |    ,--,:  : |  /  /    '.  '   '  ;</p><p class='prompt'>:   : '/ /  |   :  : .'___,/    ,'  .'___,/    ,'  ,---.'   | ,`--.'`|  ' : |  :  /`. /  |   |  |</p><p class='prompt'>|   '   ,   :   |  ' |    :     |   |    :     |   |   |   .' |   :  :  | | ;  |  |--`   '   :  ;</p><p class='prompt'>'   |  /    |   :  | ;    |.';  ;   ;    |.';  ;   :   :  |-, :   |   \\ | : |  :  ;_     |   |  '</p><p class='prompt'>|   ;  ;    '   '  ; `----'  |  |   `----'  |  |   :   |  ;/| |   : '  '; |  \\  \\    `.  '   :  |</p><p class='prompt'>:   '   \\   |   |  |     '   :  ;       '   :  ;   |   :   .' '   ' ;.    ;   `----.   \\ ;   |  ;</p><p class='prompt'>'   : |.  \\ |   |  '     '   :  |       '   :  |   '   :  ;/| '   : |  ; .'  /  /`--'  /  `--..`;  </p><p class='prompt'>|   | '_\\.' '   :  |     ;   |.'        ;   |.'    |   |    \\ |   | '`--'   '--'.     /  .--,_   </p><p class='prompt'>'   : |     ;   |.'      '---'          '---'      |   :   .' '   : |         `--'---'   |    |`.  </p><p class='prompt'>;   |,'     '---'                                  |   | ,'   ;   |.'                    `-- -`, ; </p><p class='prompt'>'---'                                              `----'     '---'                        '---`'</p><p class='prompt'>                                                              </p></div>");var lines=$(".kittens p");$.each(lines,function(index,line){setTimeout(function(){$(line).css({opacity:1}),textEffect($(line))},100*index)}),$(".new-output").velocity("scroll"),{duration:100},setTimeout(function(){var gif;$.get("http://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&tag=kittens",function(result){gif=result.data.image_url,$(".terminal").append('<img class="kitten-gif" src="'+gif+'"">'),resetForm(!0)})},100*lines.length+1e3)}function textEffect(line){var alpha=[";",".",",",":",";","~","`"],animationSpeed=10,index=0,string=line.text(),splitString=string.split(""),copyString=splitString.slice(0),emptyString=copyString.map(function(el){return[alpha[Math.floor(Math.random()*alpha.length)],index++]});emptyString=shuffle(emptyString),$.each(copyString,function(i,el){var newChar=emptyString[i];toUnderscore(copyString,line,newChar),setTimeout(function(){fromUnderscore(copyString,splitString,newChar,line)},i*animationSpeed)})}function toUnderscore(copyString,line,newChar){copyString[newChar[1]]=newChar[0],line.text(copyString.join(""))}function fromUnderscore(copyString,splitString,newChar,line){copyString[newChar[1]]=splitString[newChar[1]],line.text(copyString.join(""))}function shuffle(o){for(var j,x,i=o.length;i;j=Math.floor(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);return o}function formInput(){$("#form-slideshow").on("cycle-before",function(){$("#form-slideshow").velocity({translateZ:0,opacity:0},{duration:200})}),$("#form-slideshow").on("cycle-after",function(){$("#form-slideshow").velocity({translateZ:0,opacity:1},{duration:700})}),$("#button-form-project").on("click",function(){return $(".cycle-slideshow").cycle("goto",1),$("#form-slideshow").velocity("scroll",{axis:"y",duration:500,mobileHA:!1}),!1}),$("#button-form-simple").on("click",function(){return $(".cycle-slideshow").cycle("goto",6),$("#form-slideshow").velocity("scroll",{axis:"y",duration:500,mobileHA:!1}),!1}),$("#button-form-simple-return").on("click",function(){return $(".cycle-slideshow").cycle("goto",0),!1}),$("input, textarea").on("input focus blur",function(){$(this).hasClass("required")&&($.trim(this.value).length?$(this).hasClass("email")?-1!=$.trim(this.value).indexOf("@")?($(this).addClass("complete"),$(this).parent(".grid_row").children(".required-text").addClass("hidden")):($(this).removeClass("complete"),$(this).parent(".grid_row").children(".required-text").removeClass("hidden")):($(this).addClass("complete"),$(this).parent(".grid_row").children(".required-text").addClass("hidden")):($(this).removeClass("complete"),$(this).parent(".grid_row").children(".required-text").removeClass("hidden")));var allRequired=$(this).parents(".form-slide").children().children(".required"),complete=$(this).parents(".form-slide").children().children(".required.complete");allRequired.length==complete.length&&$(this).parents(".form-slide").children(".button-next").addClass("active")}),$("#project-timeline-dropdown").on("click",function(){return $(this).parent(".form-dropdown-row").toggleClass("active"),!1}),$(".form-dropdown-link").on("click",function(){var dropdownValue=$(this).data("value");return $("#project-timeline-dropdown").html(dropdownValue).addClass("filled"),$("#project-timeline-value").val(dropdownValue),$(this).parents(".form-dropdown-row").removeClass("active"),!1}),$(".next").on("click",function(){return $(this).hasClass("active")&&$(".cycle-slideshow").cycle("next"),!1}),$("#button-submit-contact-simple").on("click",function(){if($(this).hasClass("active")){var name=$("#form-simple-name").val(),email=$("#form-simple-email").val(),company=$("#form-simple-company").val(),subject=$("#form-simple-subject").val(),comments=$("#form-simple-message").val(),dataString="name="+name+"&email="+email+"&company="+company+"&subject="+subject+"&comments="+comments;$.ajax({type:"POST",url:"/contact-simple.php",data:dataString,success:function(){$(".cycle-slideshow").cycle("goto",8)}})}return!1}),$("#button-submit-contact-complex").on("click",function(){if($(this).hasClass("active")){var name=$("#form-complex-name").val(),email=$("#form-complex-email").val(),phone=$("#form-complex-phone").val(),company=$("#form-complex-company").val(),projectname=$("#form-complex-projectname").val(),projectgoals=$("#form-complex-projectgoals").val(),projecttimeline=$("#project-timeline-value").val(),projectbudget=$("#form-complex-projectbudget").val(),dataString="name="+name+"&email="+email+"&phone="+phone+"&company="+company+"&projectname="+projectname+"&projectgoals="+projectgoals+"&projecttimeline="+projecttimeline+"&projectbudget="+projectbudget;$.ajax({type:"POST",url:"/contact-complex.php",data:dataString,success:function(){$(".cycle-slideshow").cycle("goto",8)}})}return!1})}var windowWidth=$(window).width(),windowHeight=$(window).height(),isMobile=navigator.userAgent.match(/mobile/i),webGLTrue=!1;window.WebGLRenderingContext&&(webGLTrue=!0),isMobile?$("body").addClass("mobile"):isMobile||$("body").addClass("desktop");var img,canvas,container,imgRatio,containerRatio,screenShotCanvas,canvasDataURL,canvasImage,seriously,sourceImage,layers,edge,blend1,linearGreen,scale1,blend2,linearPurple,scale2,blend3,blend4,blend5,target,screenCaptured=!1,animateable=!0,popstate=!1,isFourOhFour=!1,inputReady=!0,glitchExists=!1,purpleTranslate=[],workerPurpleX=new Worker("/js/workers/worker_purpleX.js"),workerPurpleY=new Worker("/js/workers/worker_purpleY.js"),greenTranslate=[],workerGreenX=new Worker("/js/workers/worker_greenX.js"),workerGreenY=new Worker("/js/workers/worker_greenY.js"),pageTransition=function($newEl){var $oldEl=this,transSpeed=1e3;$("#main-body").append($newEl),$newEl.css({opacity:0}),$("#main-body section.ajax").slice(2).remove(),popstate&&(transSpeed=0),setTimeout(function(){$oldEl.remove()},transSpeed),$newEl.velocity({opacity:[1,0]},{duration:1,delay:transSpeed})};$("body").djax(".ajax",[],pageTransition),$(window).bind("djaxClick",function(e,data){webGLTrue?loadPageCanvas():webGLTrue||loadPageStatic()}),$(window).bind("djaxLoad",function(e,data){var timeout=1e3;popstate&&(timeout=0),ga("send","pageview",{page:window.location.pathname,title:document.title}),isFourOhFour&&(isFourOhFour=!1),webGLTrue?setTimeout(function(){startupFunctions(),removePageCanvas(),setTimeout(function(){screenShotCanvas=null,canvasDataURL=null,canvasImage=null,screenCaptured=!1,captureScreen()},1e3),"undefined"!=typeof mouseflow&&setTimeout(function(){window.location.pathname;mouseflow.newPageView()},2e3)},timeout):webGLTrue||setTimeout(function(){startupFunctions(),removePageStatic(),"undefined"!=typeof mouseflow&&setTimeout(function(){window.location.pathname;mouseflow.newPageView()},2e3)},1500)}),startupFunctions(),$(window).load(function(){webGLTrue&&captureScreen(),"undefined"!=typeof mouseflow&&mouseflow.newPageView()}),window.onpopstate=function(){popstate=!0};var debounceAdjust=debounce(function(){$("header").hasClass("eliza")&&webGLTrue&&resizeImage(),widowControl()},50);window.addEventListener("resize",debounceAdjust);var container,camera,scene,sceneBG,bgMesh,renderer,composer,glitchDtSize=100,glitchDelay=1,glitchAmplification=.5;});